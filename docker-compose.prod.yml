version: "3"

services:
  app_prod:
    build: 
      context: .
      dockerfile: Dockerfile.prod
    container_name: course-platform-app-prod
    ports:
      - 3000:3000
    volumes:
      - .:/home/node/app
      - /home/node/app/dist
      - /home/node/app/node_modules
    depends_on:
      - postgres_prod
  postgres_prod:
    image: "postgres:15"
    container_name: course-platform-postgres-prod
    environment:
      - "POSTGRES_USER=${POSTGRES_USER}"
      - "POSTGRES_PASSWORD=${POSTGRES_PASS}"
      - "POSTGRES_DB=${POSTGRES_DATABASE}"